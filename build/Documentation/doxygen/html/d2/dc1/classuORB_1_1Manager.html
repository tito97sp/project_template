<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>embedded_project_template: uORB::Manager Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">embedded_project_template
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>uORB</b></li><li class="navelem"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html">Manager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="../../d5/d14/classuORB_1_1Manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">uORB::Manager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../da/d4c/uORBManager_8hpp_source.html">uORBManager.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a083331e24ac4f99ac11a0aab1b1681b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/dbc/classuORB_1_1DeviceMaster.html">uORB::DeviceMaster</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#a083331e24ac4f99ac11a0aab1b1681b4">get_device_master</a> ()</td></tr>
<tr class="separator:a083331e24ac4f99ac11a0aab1b1681b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42e075fba5970aa0730faab182e2083f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/da4/uORB_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#a42e075fba5970aa0730faab182e2083f">orb_advertise</a> (const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *meta, const void *data, unsigned int queue_size=1)</td></tr>
<tr class="separator:a42e075fba5970aa0730faab182e2083f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a808104f7ebeab8f0d548dd9127344b24"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/da4/uORB_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#a808104f7ebeab8f0d548dd9127344b24">orb_advertise_multi</a> (const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *meta, const void *data, int *instance, unsigned int queue_size=1)</td></tr>
<tr class="separator:a808104f7ebeab8f0d548dd9127344b24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45601ddc722320b9cd660d9548263824"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#a45601ddc722320b9cd660d9548263824">orb_unadvertise</a> (<a class="el" href="../../d2/da4/uORB_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a> handle)</td></tr>
<tr class="separator:a45601ddc722320b9cd660d9548263824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbe6966f841886ce3003ebc6d2198447"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#abbe6966f841886ce3003ebc6d2198447">orb_publish</a> (const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *meta, <a class="el" href="../../d2/da4/uORB_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a> handle, const void *data)</td></tr>
<tr class="separator:abbe6966f841886ce3003ebc6d2198447"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae54072a80ad4de6d127e2dad8182b8fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#ae54072a80ad4de6d127e2dad8182b8fb">orb_subscribe</a> (const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *meta)</td></tr>
<tr class="separator:ae54072a80ad4de6d127e2dad8182b8fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a31fb71a0962db44450963559296cfe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#a9a31fb71a0962db44450963559296cfe">orb_subscribe_multi</a> (const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *meta, unsigned instance)</td></tr>
<tr class="separator:a9a31fb71a0962db44450963559296cfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77539878280b749d79d2c16dc5628c81"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#a77539878280b749d79d2c16dc5628c81">orb_unsubscribe</a> (int handle)</td></tr>
<tr class="separator:a77539878280b749d79d2c16dc5628c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1048c82b439300c706fe0a083b61f90"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#af1048c82b439300c706fe0a083b61f90">orb_copy</a> (const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *meta, int handle, void *buffer)</td></tr>
<tr class="separator:af1048c82b439300c706fe0a083b61f90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5503920d25d544ce3be1cf79cda869f7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#a5503920d25d544ce3be1cf79cda869f7">orb_check</a> (int handle, bool *updated)</td></tr>
<tr class="separator:a5503920d25d544ce3be1cf79cda869f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a446823738a75847a6732008784445c9f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#a446823738a75847a6732008784445c9f">orb_exists</a> (const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *meta, int instance)</td></tr>
<tr class="separator:a446823738a75847a6732008784445c9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aade04ff2a8a3aaf275b39fc32934fc56"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#aade04ff2a8a3aaf275b39fc32934fc56">orb_set_interval</a> (int handle, unsigned interval)</td></tr>
<tr class="separator:aade04ff2a8a3aaf275b39fc32934fc56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a627a7e6ef16970d2b6d8f02471795963"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#a627a7e6ef16970d2b6d8f02471795963">orb_get_interval</a> (int handle, unsigned *interval)</td></tr>
<tr class="separator:a627a7e6ef16970d2b6d8f02471795963"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:abb160fdd7ba0fe448ffa7f654a796267"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#abb160fdd7ba0fe448ffa7f654a796267">initialize</a> ()</td></tr>
<tr class="separator:abb160fdd7ba0fe448ffa7f654a796267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a306a9970d2f7cf304fba4a918e238558"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#a306a9970d2f7cf304fba4a918e238558">terminate</a> ()</td></tr>
<tr class="separator:a306a9970d2f7cf304fba4a918e238558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d829b3ea49d16d03c2fa37ef2bb24a5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/dc1/classuORB_1_1Manager.html">uORB::Manager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#a9d829b3ea49d16d03c2fa37ef2bb24a5">get_instance</a> ()</td></tr>
<tr class="separator:a9d829b3ea49d16d03c2fa37ef2bb24a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is implemented as a singleton. This class manages creating the uORB nodes for each uORB topics and also implements the behavor of the uORB Api's. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d4c/uORBManager_8hpp_source.html#l00063">63</a> of file <a class="el" href="../../da/d4c/uORBManager_8hpp_source.html">uORBManager.hpp</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a083331e24ac4f99ac11a0aab1b1681b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a083331e24ac4f99ac11a0aab1b1681b4">&#9670;&nbsp;</a></span>get_device_master()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/dbc/classuORB_1_1DeviceMaster.html">uORB::DeviceMaster</a> * uORB::Manager::get_device_master </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the <a class="el" href="../../d3/dbc/classuORB_1_1DeviceMaster.html">DeviceMaster</a>. If it does not exist, it will be created and initialized. Note: the first call to this is not thread-safe. </p><dl class="section return"><dt>Returns</dt><dd>nullptr if initialization failed (and errno will be set) </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00090">90</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">if</span> (!_device_master) {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        _device_master = <span class="keyword">new</span> DeviceMaster();</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">if</span> (_device_master == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            printf(<span class="stringliteral">&quot;Failed to allocate DeviceMaster&quot;</span>);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            errno = ENOMEM;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">return</span> _device_master;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a9d829b3ea49d16d03c2fa37ef2bb24a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d829b3ea49d16d03c2fa37ef2bb24a5">&#9670;&nbsp;</a></span>get_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d2/dc1/classuORB_1_1Manager.html">uORB::Manager</a>* uORB::Manager::get_instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Method to get the singleton instance for the <a class="el" href="../../d2/dc1/classuORB_1_1Manager.html">uORB::Manager</a>. Make sure <a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#abb160fdd7ba0fe448ffa7f654a796267">initialize()</a> is called first. </p><dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html">uORB::Manager</a>* </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d4c/uORBManager_8hpp_source.html#l00088">88</a> of file <a class="el" href="../../da/d4c/uORBManager_8hpp_source.html">uORBManager.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{ <span class="keywordflow">return</span> _Instance; }</div></div><!-- fragment -->
</div>
</div>
<a id="abb160fdd7ba0fe448ffa7f654a796267"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb160fdd7ba0fe448ffa7f654a796267">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool uORB::Manager::initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialize the singleton. Call this before everything else. </p><dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00047">47</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">if</span> (_Instance == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        _Instance = <span class="keyword">new</span> <a class="code" href="../../d2/dc1/classuORB_1_1Manager.html">uORB::Manager</a>();</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">return</span> _Instance != <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div><div class="ttc" id="classuORB_1_1Manager_html"><div class="ttname"><a href="../../d2/dc1/classuORB_1_1Manager.html">uORB::Manager</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4c/uORBManager_8hpp_source.html#l00063">uORBManager.hpp:63</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a42e075fba5970aa0730faab182e2083f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42e075fba5970aa0730faab182e2083f">&#9670;&nbsp;</a></span>orb_advertise()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/da4/uORB_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a> uORB::Manager::orb_advertise </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *&#160;</td>
          <td class="paramname"><em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>queue_size</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Advertise as the publisher of a topic.</p>
<p>This performs the initial advertisement of a topic; it creates the topic node in /obj if required and publishes the initial data.</p>
<p>Any number of advertisers may publish to a topic; publications are atomic but co-ordination between publishers is not provided by the ORB.</p>
<p>Internally this will call orb_advertise_multi with an instance of 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">meta</td><td>The uORB metadata (usually from the <a class="el" href="../../d2/da4/uORB_8h.html#a96af5434ec1acdf24287bd7851b0413f">ORB_ID()</a> macro) for the topic. </td></tr>
    <tr><td class="paramname">data</td><td>A pointer to the initial data to be published. For topics updated by interrupt handlers, the advertisement must be performed from non-interrupt context. </td></tr>
    <tr><td class="paramname">queue_size</td><td>Maximum number of buffered elements. If this is 1, no queuing is used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nullptr on error, otherwise returns an object pointer that can be used to publish to the topic. If the topic in question is not known (due to an ORB_DEFINE with no corresponding ORB_DECLARE) this function will return nullptr and set errno to ENOENT. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d4c/uORBManager_8hpp_source.html#l00123">123</a> of file <a class="el" href="../../da/d4c/uORBManager_8hpp_source.html">uORBManager.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/dc1/classuORB_1_1Manager.html#a808104f7ebeab8f0d548dd9127344b24">orb_advertise_multi</a>(meta, data, <span class="keyword">nullptr</span>, queue_size);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div><div class="ttc" id="classuORB_1_1Manager_html_a808104f7ebeab8f0d548dd9127344b24"><div class="ttname"><a href="../../d2/dc1/classuORB_1_1Manager.html#a808104f7ebeab8f0d548dd9127344b24">uORB::Manager::orb_advertise_multi</a></div><div class="ttdeci">orb_advert_t orb_advertise_multi(const struct orb_metadata *meta, const void *data, int *instance, unsigned int queue_size=1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d01/uORBManager_8cpp_source.html#l00168">uORBManager.cpp:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a808104f7ebeab8f0d548dd9127344b24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a808104f7ebeab8f0d548dd9127344b24">&#9670;&nbsp;</a></span>orb_advertise_multi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/da4/uORB_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a> uORB::Manager::orb_advertise_multi </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *&#160;</td>
          <td class="paramname"><em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>queue_size</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Advertise as the publisher of a topic.</p>
<p>This performs the initial advertisement of a topic; it creates the topic node in /obj if required and publishes the initial data.</p>
<p>Any number of advertisers may publish to a topic; publications are atomic but co-ordination between publishers is not provided by the ORB.</p>
<p>The multi can be used to create multiple independent instances of the same topic (each instance has its own buffer). This is useful for multiple publishers who publish the same topic. The subscriber then subscribes to all instances and chooses which source he wants to use.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">meta</td><td>The uORB metadata (usually from the <a class="el" href="../../d2/da4/uORB_8h.html#a96af5434ec1acdf24287bd7851b0413f">ORB_ID()</a> macro) for the topic. </td></tr>
    <tr><td class="paramname">data</td><td>A pointer to the initial data to be published. For topics updated by interrupt handlers, the advertisement must be performed from non-interrupt context. </td></tr>
    <tr><td class="paramname">instance</td><td>Pointer to an integer which will yield the instance ID (0-based) of the publication. This is an output parameter and will be set to the newly created instance, ie. 0 for the first advertiser, 1 for the next and so on. </td></tr>
    <tr><td class="paramname">queue_size</td><td>Maximum number of buffered elements. If this is 1, no queuing is used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PX4_ERROR on error, otherwise returns a handle that can be used to publish to the topic. If the topic in question is not known (due to an ORB_DEFINE with no corresponding ORB_DECLARE) this function will return -1 and set errno to ENOENT. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00168">168</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;{</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">#ifdef ORB_USE_PUBLISHER_RULES</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">// check publisher rule</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span> (_has_publisher_rules) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *prog_name = px4_get_taskname();</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">if</span> (strcmp(_publisher_rule.module_name, prog_name) == 0) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">if</span> (_publisher_rule.ignore_other_topics) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <span class="keywordflow">if</span> (!findTopic(_publisher_rule, meta-&gt;<a class="code" href="../../dc/d03/structorb__metadata.html#a54d1751f24aa0c1f24934c6712811e58">o_name</a>)) {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    PX4_DEBUG(<span class="stringliteral">&quot;not allowing %s to publish topic %s&quot;</span>, prog_name, meta-&gt;<a class="code" href="../../dc/d03/structorb__metadata.html#a54d1751f24aa0c1f24934c6712811e58">o_name</a>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                    <span class="keywordflow">return</span> (<a class="code" href="../../d2/da4/uORB_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a>)_Instance;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keywordflow">if</span> (findTopic(_publisher_rule, meta-&gt;<a class="code" href="../../dc/d03/structorb__metadata.html#a54d1751f24aa0c1f24934c6712811e58">o_name</a>)) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                PX4_DEBUG(<span class="stringliteral">&quot;not allowing %s to publish topic %s&quot;</span>, prog_name, meta-&gt;<a class="code" href="../../dc/d03/structorb__metadata.html#a54d1751f24aa0c1f24934c6712811e58">o_name</a>);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                <span class="keywordflow">return</span> (<a class="code" href="../../d2/da4/uORB_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a>)_Instance;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ORB_USE_PUBLISHER_RULES */</span><span class="preprocessor"></span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">/* open the node as an advertiser */</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordtype">int</span> fd = node_open(meta, <span class="keyword">true</span>, instance);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> (fd == -1) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        printf(<span class="stringliteral">&quot;%s advertise failed (%i)&quot;</span>, meta-&gt;<a class="code" href="../../dc/d03/structorb__metadata.html#a54d1751f24aa0c1f24934c6712811e58">o_name</a>, errno);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">/* Set the queue size. This must be done before the first publication; thus it fails if</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">     * this is not the first advertiser.</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">int</span> result = ioctl(fd, <a class="code" href="../../d8/d61/drv__orb__dev_8h.html#a4835f9286d5aac7a6b5e0a01661cbee7">ORBIOCSETQUEUESIZE</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)queue_size);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (result &lt; 0 &amp;&amp; queue_size &gt; 1) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        printf(<span class="stringliteral">&quot;orb_advertise_multi: failed to set queue size&quot;</span>);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">/* get the advertiser handle and close the node */</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="../../d2/da4/uORB_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a> advertiser;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    result = ioctl(fd, <a class="code" href="../../d8/d61/drv__orb__dev_8h.html#a0ba7c1d8b06e6930ed9589dbebbc775a">ORBIOCGADVERTISER</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)&amp;advertiser);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    close(fd);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span> (result == -1) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        printf(<span class="stringliteral">&quot;px4_ioctl ORBIOCGADVERTISER failed. fd = %d&quot;</span>, fd);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">#ifdef ORB_COMMUNICATOR</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">// For remote systems call over and inform them</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    uORB::DeviceNode::topic_advertised(meta);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ORB_COMMUNICATOR */</span><span class="preprocessor"></span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">/* the advertiser may perform an initial publish to initialise the object */</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span> (data != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        result = <a class="code" href="../../d2/dc1/classuORB_1_1Manager.html#abbe6966f841886ce3003ebc6d2198447">orb_publish</a>(meta, advertiser, data);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">if</span> (result == -1) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            printf(<span class="stringliteral">&quot;orb_publish failed %s&quot;</span>, meta-&gt;<a class="code" href="../../dc/d03/structorb__metadata.html#a54d1751f24aa0c1f24934c6712811e58">o_name</a>);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">return</span> advertiser;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div><div class="ttc" id="uORB_8h_html_a8d0cfa5f9ea6427a37057d6cea6dd990"><div class="ttname"><a href="../../d2/da4/uORB_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a></div><div class="ttdeci">__BEGIN_DECLS typedef void * orb_advert_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da4/uORB_8h_source.html#l00127">uORB.h:127</a></div></div>
<div class="ttc" id="structorb__metadata_html_a54d1751f24aa0c1f24934c6712811e58"><div class="ttname"><a href="../../dc/d03/structorb__metadata.html#a54d1751f24aa0c1f24934c6712811e58">orb_metadata::o_name</a></div><div class="ttdeci">const char * o_name</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da4/uORB_8h_source.html#l00055">uORB.h:55</a></div></div>
<div class="ttc" id="classuORB_1_1Manager_html_abbe6966f841886ce3003ebc6d2198447"><div class="ttname"><a href="../../d2/dc1/classuORB_1_1Manager.html#abbe6966f841886ce3003ebc6d2198447">uORB::Manager::orb_publish</a></div><div class="ttdeci">int orb_publish(const struct orb_metadata *meta, orb_advert_t handle, const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d01/uORBManager_8cpp_source.html#l00270">uORBManager.cpp:270</a></div></div>
<div class="ttc" id="drv__orb__dev_8h_html_a4835f9286d5aac7a6b5e0a01661cbee7"><div class="ttname"><a href="../../d8/d61/drv__orb__dev_8h.html#a4835f9286d5aac7a6b5e0a01661cbee7">ORBIOCSETQUEUESIZE</a></div><div class="ttdeci">#define ORBIOCSETQUEUESIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d61/drv__orb__dev_8h_source.html#l00067">drv_orb_dev.h:67</a></div></div>
<div class="ttc" id="drv__orb__dev_8h_html_a0ba7c1d8b06e6930ed9589dbebbc775a"><div class="ttname"><a href="../../d8/d61/drv__orb__dev_8h.html#a0ba7c1d8b06e6930ed9589dbebbc775a">ORBIOCGADVERTISER</a></div><div class="ttdeci">#define ORBIOCGADVERTISER</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d61/drv__orb__dev_8h_source.html#l00061">drv_orb_dev.h:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5503920d25d544ce3be1cf79cda869f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5503920d25d544ce3be1cf79cda869f7">&#9670;&nbsp;</a></span>orb_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uORB::Manager::orb_check </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>updated</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check whether a topic has been published to since the last orb_copy.</p>
<p>This check can be used to determine whether to copy the topic when not using poll(), or to avoid the overhead of calling poll() when the topic is likely to have updated.</p>
<p>Updates are tracked on a per-handle basis; this call will continue to return true until orb_copy is called using the same handle.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A handle returned from orb_subscribe. </td></tr>
    <tr><td class="paramname">updated</td><td>Set to true if the topic has been updated since the last time it was copied using this handle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK if the check was successful, PX4_ERROR otherwise with errno set accordingly. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00301">301</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;{</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">/* Set to false here so that if `px4_ioctl` fails to false. */</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    *updated = <span class="keyword">false</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">return</span> ioctl(handle, <a class="code" href="../../d8/d61/drv__orb__dev_8h.html#a60e19540d21f9a44e9157804121957f8">ORBIOCUPDATED</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(uintptr_t)updated);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div><div class="ttc" id="drv__orb__dev_8h_html_a60e19540d21f9a44e9157804121957f8"><div class="ttname"><a href="../../d8/d61/drv__orb__dev_8h.html#a60e19540d21f9a44e9157804121957f8">ORBIOCUPDATED</a></div><div class="ttdeci">#define ORBIOCUPDATED</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d61/drv__orb__dev_8h_source.html#l00055">drv_orb_dev.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af1048c82b439300c706fe0a083b61f90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1048c82b439300c706fe0a083b61f90">&#9670;&nbsp;</a></span>orb_copy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uORB::Manager::orb_copy </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *&#160;</td>
          <td class="paramname"><em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fetch data from a topic.</p>
<p>This is the only operation that will reset the internal marker that indicates that a topic has been updated for a subscriber. Once poll or check return indicating that an updaet is available, this call must be used to update the subscription.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">meta</td><td>The uORB metadata (usually from the <a class="el" href="../../d2/da4/uORB_8h.html#a96af5434ec1acdf24287bd7851b0413f">ORB_ID()</a> macro) for the topic. </td></tr>
    <tr><td class="paramname">handle</td><td>A handle returned from orb_subscribe. </td></tr>
    <tr><td class="paramname">buffer</td><td>Pointer to the buffer receiving the data, or NULL if the caller wants to clear the updated flag without using the data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK on success, PX4_ERROR otherwise with errno set accordingly. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00283">283</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    ret = read(handle, buffer, meta-&gt;<a class="code" href="../../dc/d03/structorb__metadata.html#a400a86fe707613e881b620cde7888b74">o_size</a>);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> (ret != (<span class="keywordtype">int</span>)meta-&gt;<a class="code" href="../../dc/d03/structorb__metadata.html#a400a86fe707613e881b620cde7888b74">o_size</a>) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        errno = EIO;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div><div class="ttc" id="structorb__metadata_html_a400a86fe707613e881b620cde7888b74"><div class="ttname"><a href="../../dc/d03/structorb__metadata.html#a400a86fe707613e881b620cde7888b74">orb_metadata::o_size</a></div><div class="ttdeci">const uint16_t o_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da4/uORB_8h_source.html#l00056">uORB.h:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a446823738a75847a6732008784445c9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a446823738a75847a6732008784445c9f">&#9670;&nbsp;</a></span>orb_exists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uORB::Manager::orb_exists </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *&#160;</td>
          <td class="paramname"><em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>instance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if a topic has already been created and published (advertised)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">meta</td><td>ORB topic metadata. </td></tr>
    <tr><td class="paramname">instance</td><td>ORB instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK if the topic exists, PX4_ERROR otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00104">104</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordtype">int</span> ret = -1;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// instance valid range: [0, ORB_MULTI_MAX_INSTANCES)</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> ((instance &lt; 0) || (instance &gt; (<a class="code" href="../../d2/da4/uORB_8h.html#a8c09e8f28a090e8cae61e10d627f102a">ORB_MULTI_MAX_INSTANCES</a> - 1))) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dc1/classuORB_1_1Manager.html#a083331e24ac4f99ac11a0aab1b1681b4">get_device_master</a>()) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <a class="code" href="../../de/da0/classuORB_1_1DeviceNode.html">uORB::DeviceNode</a> *node = _device_master-&gt;<a class="code" href="../../d3/dbc/classuORB_1_1DeviceMaster.html#a793df66a48dcabdd0f5bd8c85beee13c">getDeviceNode</a>(meta, instance);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span> (node != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">if</span> (node-&gt;<a class="code" href="../../de/da0/classuORB_1_1DeviceNode.html#a16d1880bc99853428a8d8a240f24857b">is_advertised</a>()) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#ifdef ORB_COMMUNICATOR</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">     * Generate the path to the node and try to open it.</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordtype">char</span> path[orb_maxpath];</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">int</span> inst = instance;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    ret = uORB::Utils::node_mkpath(path, meta, &amp;inst);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span> (ret != OK) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        errno = -ret;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">return</span> PX4_ERROR;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    ret = px4_access(path, F_OK);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (ret == -1 &amp;&amp; meta != <span class="keyword">nullptr</span> &amp;&amp; !_remote_topics.empty()) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        ret = (_remote_topics.find(meta-&gt;<a class="code" href="../../dc/d03/structorb__metadata.html#a54d1751f24aa0c1f24934c6712811e58">o_name</a>) != _remote_topics.end()) ? OK : PX4_ERROR;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (ret == 0) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="comment">// we know the topic exists, but it&#39;s not necessarily advertised/published yet (for example</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="comment">// if there is only a subscriber)</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="comment">// The open() will not lead to memory allocations.</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordtype">int</span> fd = px4_open(path, 0);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">if</span> (fd &gt;= 0) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> is_advertised;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="keywordflow">if</span> (px4_ioctl(fd, <a class="code" href="../../d8/d61/drv__orb__dev_8h.html#a00f4a4fca062412c74b581a041c43c7a">ORBIOCISADVERTISED</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)&amp;is_advertised) == 0) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                <span class="keywordflow">if</span> (!is_advertised) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                    ret = PX4_ERROR;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            px4_close(fd);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ORB_COMMUNICATOR */</span><span class="preprocessor"></span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div><div class="ttc" id="classuORB_1_1Manager_html_a083331e24ac4f99ac11a0aab1b1681b4"><div class="ttname"><a href="../../d2/dc1/classuORB_1_1Manager.html#a083331e24ac4f99ac11a0aab1b1681b4">uORB::Manager::get_device_master</a></div><div class="ttdeci">uORB::DeviceMaster * get_device_master()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d01/uORBManager_8cpp_source.html#l00090">uORBManager.cpp:90</a></div></div>
<div class="ttc" id="classuORB_1_1DeviceNode_html_a16d1880bc99853428a8d8a240f24857b"><div class="ttname"><a href="../../de/da0/classuORB_1_1DeviceNode.html#a16d1880bc99853428a8d8a240f24857b">uORB::DeviceNode::is_advertised</a></div><div class="ttdeci">bool is_advertised() const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d89/uORBDeviceNode_8hpp_source.html#l00169">uORBDeviceNode.hpp:169</a></div></div>
<div class="ttc" id="structorb__metadata_html_a54d1751f24aa0c1f24934c6712811e58"><div class="ttname"><a href="../../dc/d03/structorb__metadata.html#a54d1751f24aa0c1f24934c6712811e58">orb_metadata::o_name</a></div><div class="ttdeci">const char * o_name</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da4/uORB_8h_source.html#l00055">uORB.h:55</a></div></div>
<div class="ttc" id="uORB_8h_html_a8c09e8f28a090e8cae61e10d627f102a"><div class="ttname"><a href="../../d2/da4/uORB_8h.html#a8c09e8f28a090e8cae61e10d627f102a">ORB_MULTI_MAX_INSTANCES</a></div><div class="ttdeci">#define ORB_MULTI_MAX_INSTANCES</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da4/uORB_8h_source.html#l00067">uORB.h:67</a></div></div>
<div class="ttc" id="drv__orb__dev_8h_html_a00f4a4fca062412c74b581a041c43c7a"><div class="ttname"><a href="../../d8/d61/drv__orb__dev_8h.html#a00f4a4fca062412c74b581a041c43c7a">ORBIOCISADVERTISED</a></div><div class="ttdeci">#define ORBIOCISADVERTISED</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d61/drv__orb__dev_8h_source.html#l00073">drv_orb_dev.h:73</a></div></div>
<div class="ttc" id="classuORB_1_1DeviceMaster_html_a793df66a48dcabdd0f5bd8c85beee13c"><div class="ttname"><a href="../../d3/dbc/classuORB_1_1DeviceMaster.html#a793df66a48dcabdd0f5bd8c85beee13c">uORB::DeviceMaster::getDeviceNode</a></div><div class="ttdeci">uORB::DeviceNode * getDeviceNode(const char *node_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbe/uORBDeviceMaster_8cpp_source.html#l00417">uORBDeviceMaster.cpp:417</a></div></div>
<div class="ttc" id="classuORB_1_1DeviceNode_html"><div class="ttname"><a href="../../de/da0/classuORB_1_1DeviceNode.html">uORB::DeviceNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d89/uORBDeviceNode_8hpp_source.html#l00058">uORBDeviceNode.hpp:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a627a7e6ef16970d2b6d8f02471795963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a627a7e6ef16970d2b6d8f02471795963">&#9670;&nbsp;</a></span>orb_get_interval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uORB::Manager::orb_get_interval </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>interval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the minimum interval between which updates are seen for a subscription.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#aade04ff2a8a3aaf275b39fc32934fc56">orb_set_interval()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A handle returned from orb_subscribe. </td></tr>
    <tr><td class="paramname">interval</td><td>The returned interval period in milliseconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK on success, PX4_ERROR otherwise with ERRNO set accordingly. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00313">313</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;{</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordtype">int</span> ret = ioctl(handle, <a class="code" href="../../d8/d61/drv__orb__dev_8h.html#acdbdb0d6f9b8600498ffa2599dca742d">ORBIOCGETINTERVAL</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)interval);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    *interval /= 1000;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div><div class="ttc" id="drv__orb__dev_8h_html_acdbdb0d6f9b8600498ffa2599dca742d"><div class="ttname"><a href="../../d8/d61/drv__orb__dev_8h.html#acdbdb0d6f9b8600498ffa2599dca742d">ORBIOCGETINTERVAL</a></div><div class="ttdeci">#define ORBIOCGETINTERVAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d61/drv__orb__dev_8h_source.html#l00070">drv_orb_dev.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abbe6966f841886ce3003ebc6d2198447"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbe6966f841886ce3003ebc6d2198447">&#9670;&nbsp;</a></span>orb_publish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uORB::Manager::orb_publish </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *&#160;</td>
          <td class="paramname"><em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da4/uORB_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Publish new data to a topic.</p>
<p>The data is atomically published to the topic and any waiting subscribers will be notified. Subscribers that are not waiting can check the topic for updates using orb_check.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">meta</td><td>The uORB metadata (usually from the <a class="el" href="../../d2/da4/uORB_8h.html#a96af5434ec1acdf24287bd7851b0413f">ORB_ID()</a> macro) for the topic.  The handle returned from orb_advertise. </td></tr>
    <tr><td class="paramname">data</td><td>A pointer to the data to be published. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK on success, PX4_ERROR otherwise with errno set accordingly. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00270">270</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;{</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">#ifdef ORB_USE_PUBLISHER_RULES</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">if</span> (handle == _Instance) {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">return</span> PX4_OK; <span class="comment">//pretend success</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ORB_USE_PUBLISHER_RULES */</span><span class="preprocessor"></span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/da0/classuORB_1_1DeviceNode.html#ae715517a1f3a2f361e37d061b59a4560">uORB::DeviceNode::publish</a>(meta, handle, data);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div><div class="ttc" id="classuORB_1_1DeviceNode_html_ae715517a1f3a2f361e37d061b59a4560"><div class="ttname"><a href="../../de/da0/classuORB_1_1DeviceNode.html#ae715517a1f3a2f361e37d061b59a4560">uORB::DeviceNode::publish</a></div><div class="ttdeci">static ssize_t publish(const orb_metadata *meta, orb_advert_t handle, const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5a/uORBDeviceNode_8cpp_source.html#l00274">uORBDeviceNode.cpp:274</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aade04ff2a8a3aaf275b39fc32934fc56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aade04ff2a8a3aaf275b39fc32934fc56">&#9670;&nbsp;</a></span>orb_set_interval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uORB::Manager::orb_set_interval </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>interval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the minimum interval between which updates are seen for a subscription.</p>
<p>If this interval is set, the subscriber will not see more than one update within the period.</p>
<p>Specifically, the first time an update is reported to the subscriber a timer is started. The update will continue to be reported via poll and orb_check, but once fetched via orb_copy another update will not be reported until the timer expires.</p>
<p>This feature can be used to pace a subscriber that is watching a topic that would otherwise update too quickly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A handle returned from orb_subscribe. </td></tr>
    <tr><td class="paramname">interval</td><td>An interval period in milliseconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK on success, PX4_ERROR otherwise with ERRNO set accordingly. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00308">308</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;{</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">return</span> ioctl(handle, <a class="code" href="../../d8/d61/drv__orb__dev_8h.html#a815da46533c3937c84c1496218659d0b">ORBIOCSETINTERVAL</a>, interval * 1000);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div><div class="ttc" id="drv__orb__dev_8h_html_a815da46533c3937c84c1496218659d0b"><div class="ttname"><a href="../../d8/d61/drv__orb__dev_8h.html#a815da46533c3937c84c1496218659d0b">ORBIOCSETINTERVAL</a></div><div class="ttdeci">#define ORBIOCSETINTERVAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d61/drv__orb__dev_8h_source.html#l00058">drv_orb_dev.h:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae54072a80ad4de6d127e2dad8182b8fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae54072a80ad4de6d127e2dad8182b8fb">&#9670;&nbsp;</a></span>orb_subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uORB::Manager::orb_subscribe </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *&#160;</td>
          <td class="paramname"><em>meta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Subscribe to a topic.</p>
<p>The returned value is a file descriptor that can be passed to poll() in order to wait for updates to a topic, as well as topic_read, orb_check.</p>
<p>If there were any publications of the topic prior to the subscription, an orb_check right after orb_subscribe will return true.</p>
<p><a class="el" href="../../da/d57/classuORB_1_1Subscription.html">Subscription</a> will succeed even if the topic has not been advertised; in this case the topic will have a timestamp of zero, it will never signal a poll() event, checking will always return false and it cannot be copied. When the topic is subsequently advertised, poll, check, stat and copy calls will react to the initial publication that is performed as part of the advertisement.</p>
<p><a class="el" href="../../da/d57/classuORB_1_1Subscription.html">Subscription</a> will fail if the topic is not known to the system, i.e. there is nothing in the system that has declared the topic and thus it can never be published.</p>
<p>Internally this will call orb_subscribe_multi with instance 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">meta</td><td>The uORB metadata (usually from the <a class="el" href="../../d2/da4/uORB_8h.html#a96af5434ec1acdf24287bd7851b0413f">ORB_ID()</a> macro) for the topic. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PX4_ERROR on error, otherwise returns a handle that can be used to read and update the topic. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00254">254</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;{</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">return</span> node_open(meta, <span class="keyword">false</span>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a9a31fb71a0962db44450963559296cfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a31fb71a0962db44450963559296cfe">&#9670;&nbsp;</a></span>orb_subscribe_multi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uORB::Manager::orb_subscribe_multi </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../dc/d03/structorb__metadata.html">orb_metadata</a> *&#160;</td>
          <td class="paramname"><em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>instance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Subscribe to a multi-instance of a topic.</p>
<p>The returned value is a file descriptor that can be passed to poll() in order to wait for updates to a topic, as well as topic_read, orb_check.</p>
<p>If there were any publications of the topic prior to the subscription, an orb_check right after orb_subscribe_multi will return true.</p>
<p><a class="el" href="../../da/d57/classuORB_1_1Subscription.html">Subscription</a> will succeed even if the topic has not been advertised; in this case the topic will have a timestamp of zero, it will never signal a poll() event, checking will always return false and it cannot be copied. When the topic is subsequently advertised, poll, check, stat and copy calls will react to the initial publication that is performed as part of the advertisement.</p>
<p><a class="el" href="../../da/d57/classuORB_1_1Subscription.html">Subscription</a> will fail if the topic is not known to the system, i.e. there is nothing in the system that has declared the topic and thus it can never be published.</p>
<p>If a publisher publishes multiple instances the subscriber should subscribe to each instance with orb_subscribe_multi (</p><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#a808104f7ebeab8f0d548dd9127344b24">orb_advertise_multi()</a>).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">meta</td><td>The uORB metadata (usually from the <a class="el" href="../../d2/da4/uORB_8h.html#a96af5434ec1acdf24287bd7851b0413f">ORB_ID()</a> macro) for the topic. </td></tr>
    <tr><td class="paramname">instance</td><td>The instance of the topic. Instance 0 matches the topic of the <a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#ae54072a80ad4de6d127e2dad8182b8fb">orb_subscribe()</a> call, higher indices are for topics created with <a class="el" href="../../d2/dc1/classuORB_1_1Manager.html#a808104f7ebeab8f0d548dd9127344b24">orb_advertise_multi()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PX4_ERROR on error, otherwise returns a handle that can be used to read and update the topic. If the topic in question is not known (due to an ORB_DEFINE_OPTIONAL with no corresponding ORB_DECLARE) this function will return -1 and set errno to ENOENT. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00259">259</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordtype">int</span> inst = instance;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">return</span> node_open(meta, <span class="keyword">false</span>, &amp;inst);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a45601ddc722320b9cd660d9548263824"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45601ddc722320b9cd660d9548263824">&#9670;&nbsp;</a></span>orb_unadvertise()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uORB::Manager::orb_unadvertise </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/da4/uORB_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unadvertise a topic.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>handle returned by orb_advertise or orb_advertise_multi. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00241">241</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">#ifdef ORB_USE_PUBLISHER_RULES</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">if</span> (handle == _Instance) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">return</span> PX4_OK; <span class="comment">//pretend success</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ORB_USE_PUBLISHER_RULES */</span><span class="preprocessor"></span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">return</span> uORB::DeviceNode::unadvertise(handle);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a77539878280b749d79d2c16dc5628c81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77539878280b749d79d2c16dc5628c81">&#9670;&nbsp;</a></span>orb_unsubscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uORB::Manager::orb_unsubscribe </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unsubscribe from a topic.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A handle returned from orb_subscribe. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK on success, PX4_ERROR otherwise with errno set accordingly. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00265">265</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;{</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">return</span> close(fd);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a306a9970d2f7cf304fba4a918e238558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a306a9970d2f7cf304fba4a918e238558">&#9670;&nbsp;</a></span>terminate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool uORB::Manager::terminate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Terminate the singleton. Call this after everything else. </p><dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html#l00056">56</a> of file <a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">if</span> (_Instance != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keyword">delete</span> _Instance;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        _Instance = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/andressanchez/Escritorio/GIT/project_template/src/modules/uORB/<a class="el" href="../../da/d4c/uORBManager_8hpp_source.html">uORBManager.hpp</a></li>
<li>/home/andressanchez/Escritorio/GIT/project_template/src/modules/uORB/<a class="el" href="../../d3/d01/uORBManager_8cpp_source.html">uORBManager.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
