\hypertarget{classTemplateModule}{}\section{Template\+Module Class Reference}
\label{classTemplateModule}\index{Template\+Module@{Template\+Module}}


Inheritance diagram for Template\+Module\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=241pt]{d0/df9/classTemplateModule__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Template\+Module\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=241pt]{db/d74/classTemplateModule__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classTemplateModule_a380d8124f74b33afe7388cd2e0d4a38e}\label{classTemplateModule_a380d8124f74b33afe7388cd2e0d4a38e}} 
{\bfseries Template\+Module} (int example\+\_\+param, bool example\+\_\+flag)
\item 
void \hyperlink{classTemplateModule_a9ee1970fb39e76ae38e838df00e7a058}{run} () override
\item 
int \hyperlink{classTemplateModule_a0a5e50f74b8a4bc4d3102eb1487efc88}{print\+\_\+status} () override
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static int \hyperlink{classTemplateModule_a442b58c36fd9a84d34c6c2ca5da30500}{task\+\_\+spawn} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\item 
static \hyperlink{classTemplateModule}{Template\+Module} $\ast$ \hyperlink{classTemplateModule_aa31cbf48b351f5ee0b33b3cbd5b8e536}{instantiate} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\item 
static int \hyperlink{classTemplateModule_aa8b46132f5dcab9299e34ff43e2d6db5}{custom\+\_\+command} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\item 
static int \hyperlink{classTemplateModule_a5ce5da37ebb624d8fbf301343d0ed341}{print\+\_\+usage} (const char $\ast$reason=nullptr)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 46 of file template\+\_\+module.\+h.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classTemplateModule_aa8b46132f5dcab9299e34ff43e2d6db5}\label{classTemplateModule_aa8b46132f5dcab9299e34ff43e2d6db5}} 
\index{Template\+Module@{Template\+Module}!custom\+\_\+command@{custom\+\_\+command}}
\index{custom\+\_\+command@{custom\+\_\+command}!Template\+Module@{Template\+Module}}
\subsubsection{\texorpdfstring{custom\+\_\+command()}{custom\_command()}}
{\footnotesize\ttfamily int Template\+Module\+::custom\+\_\+command (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxySeeAlso}{See also}
Module\+Base 
\end{DoxySeeAlso}


Definition at line 53 of file template\+\_\+module.\+cpp.


\begin{DoxyCode}
54 \{
55     \textcolor{comment}{/*}
56 \textcolor{comment}{    if (!is\_running()) \{}
57 \textcolor{comment}{        print\_usage("not running");}
58 \textcolor{comment}{        return 1;}
59 \textcolor{comment}{    \}}
60 \textcolor{comment}{}
61 \textcolor{comment}{    // additional custom commands can be handled like this:}
62 \textcolor{comment}{    if (!strcmp(argv[0], "do-something")) \{}
63 \textcolor{comment}{        get\_instance()->do\_something();}
64 \textcolor{comment}{        return 0;}
65 \textcolor{comment}{    \}}
66 \textcolor{comment}{     */}
67 
68     \textcolor{keywordflow}{return} \hyperlink{classTemplateModule_a5ce5da37ebb624d8fbf301343d0ed341}{print\_usage}(\textcolor{stringliteral}{"unknown command"});
69 \}
\end{DoxyCode}
\mbox{\Hypertarget{classTemplateModule_aa31cbf48b351f5ee0b33b3cbd5b8e536}\label{classTemplateModule_aa31cbf48b351f5ee0b33b3cbd5b8e536}} 
\index{Template\+Module@{Template\+Module}!instantiate@{instantiate}}
\index{instantiate@{instantiate}!Template\+Module@{Template\+Module}}
\subsubsection{\texorpdfstring{instantiate()}{instantiate()}}
{\footnotesize\ttfamily \hyperlink{classTemplateModule}{Template\+Module} $\ast$ Template\+Module\+::instantiate (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxySeeAlso}{See also}
Module\+Base 
\end{DoxySeeAlso}


Definition at line 90 of file template\+\_\+module.\+cpp.


\begin{DoxyCode}
91 \{
92     \textcolor{keywordtype}{int} example\_param = 0;
93     \textcolor{keywordtype}{bool} example\_flag = \textcolor{keyword}{false};
94     \textcolor{keywordtype}{bool} error\_flag = \textcolor{keyword}{false};
95 
96     \textcolor{keywordtype}{int} option\_index = 1;
97     \textcolor{keywordtype}{int} ch;
98 
99     \textcolor{keyword}{static} \textcolor{keyword}{struct }option long\_options[] = \{
100         \{\textcolor{stringliteral}{"example\_arg\_1"},  required\_argument, 0,  0 \},
101         \{\textcolor{stringliteral}{"example\_arg\_2"},  no\_argument,       0,  0 \},
102         \{\textcolor{stringliteral}{"example\_arg\_3"},  required\_argument, 0,  0 \},
103         \{0,         0,                        0,  0 \}
104     \};
105 
106     \textcolor{comment}{// parse CLI arguments}
107     \textcolor{keywordflow}{while} ((ch = getopt\_long(argc, argv, \textcolor{stringliteral}{"p:f"}, long\_options, &option\_index)) != EOF) \{
108         \textcolor{keywordflow}{switch} (ch) \{
109         \textcolor{keywordflow}{case} \textcolor{charliteral}{'p'}:
110             example\_param = 10;
111             \textcolor{keywordflow}{break};
112 
113         \textcolor{keywordflow}{case} \textcolor{charliteral}{'f'}:
114             example\_flag = \textcolor{keyword}{true};
115             \textcolor{keywordflow}{break};
116 
117         \textcolor{keywordflow}{case} \textcolor{charliteral}{'?'}:
118             error\_flag = \textcolor{keyword}{true};
119             \textcolor{keywordflow}{break};
120 
121         \textcolor{keywordflow}{default}:
122             printf(\textcolor{stringliteral}{"WARN: unrecognized flag"});
123             error\_flag = \textcolor{keyword}{true};
124             \textcolor{keywordflow}{break};
125         \}
126     \}
127 
128     \textcolor{keywordflow}{if} (error\_flag) \{
129         \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};
130     \}
131 
132     \hyperlink{classTemplateModule}{TemplateModule} *instance = \textcolor{keyword}{new} \hyperlink{classTemplateModule}{TemplateModule}(example\_param, example\_flag);
133 
134     \textcolor{keywordflow}{if} (instance == \textcolor{keyword}{nullptr}) \{
135         printf(\textcolor{stringliteral}{"ERROR: alloc failed"});
136     \}
137 
138     \textcolor{keywordflow}{return} instance;
139 \}
\end{DoxyCode}
\mbox{\Hypertarget{classTemplateModule_a0a5e50f74b8a4bc4d3102eb1487efc88}\label{classTemplateModule_a0a5e50f74b8a4bc4d3102eb1487efc88}} 
\index{Template\+Module@{Template\+Module}!print\+\_\+status@{print\+\_\+status}}
\index{print\+\_\+status@{print\+\_\+status}!Template\+Module@{Template\+Module}}
\subsubsection{\texorpdfstring{print\+\_\+status()}{print\_status()}}
{\footnotesize\ttfamily int Template\+Module\+::print\+\_\+status (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}

\begin{DoxySeeAlso}{See also}
Module\+Base\+::print\+\_\+status() 
\end{DoxySeeAlso}


Definition at line 45 of file template\+\_\+module.\+cpp.


\begin{DoxyCode}
46 \{
47     \textcolor{comment}{//PX4\_INFO("Running");}
48     \textcolor{comment}{// TODO: print additional runtime information about the state of the module}
49 
50     \textcolor{keywordflow}{return} 0;
51 \}
\end{DoxyCode}
\mbox{\Hypertarget{classTemplateModule_a5ce5da37ebb624d8fbf301343d0ed341}\label{classTemplateModule_a5ce5da37ebb624d8fbf301343d0ed341}} 
\index{Template\+Module@{Template\+Module}!print\+\_\+usage@{print\+\_\+usage}}
\index{print\+\_\+usage@{print\+\_\+usage}!Template\+Module@{Template\+Module}}
\subsubsection{\texorpdfstring{print\+\_\+usage()}{print\_usage()}}
{\footnotesize\ttfamily int Template\+Module\+::print\+\_\+usage (\begin{DoxyParamCaption}\item[{const char $\ast$}]{reason = {\ttfamily nullptr} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxySeeAlso}{See also}
Module\+Base 
\end{DoxySeeAlso}


Definition at line 185 of file template\+\_\+module.\+cpp.


\begin{DoxyCode}
186 \{
187 \textcolor{comment}{//  if (reason) \{}
188 \textcolor{comment}{//      PX4\_WARN("%s\(\backslash\)n", reason);}
189 \textcolor{comment}{//  \}}
190 
191 \textcolor{comment}{//  PRINT\_MODULE\_DESCRIPTION(}
192 \textcolor{comment}{//      R"DESCR\_STR(}
193 \textcolor{comment}{// ### Description}
194 \textcolor{comment}{// Section that describes the provided module functionality.}
195 
196 \textcolor{comment}{// This is a template for a module running as a task in the background with start/stop/status
       functionality.}
197 
198 \textcolor{comment}{// ### Implementation}
199 \textcolor{comment}{// Section describing the high-level implementation of this module.}
200 
201 \textcolor{comment}{// ### Examples}
202 \textcolor{comment}{// CLI usage example:}
203 \textcolor{comment}{// $ module start -f -p 42}
204 
205 \textcolor{comment}{// )DESCR\_STR");}
206 
207 \textcolor{comment}{//  PRINT\_MODULE\_USAGE\_NAME("module", "template");}
208 \textcolor{comment}{//  PRINT\_MODULE\_USAGE\_COMMAND("start");}
209 \textcolor{comment}{//  PRINT\_MODULE\_USAGE\_PARAM\_FLAG('f', "Optional example flag", true);}
210 \textcolor{comment}{//  PRINT\_MODULE\_USAGE\_PARAM\_INT('p', 0, 0, 1000, "Optional example parameter", true);}
211 \textcolor{comment}{//  PRINT\_MODULE\_USAGE\_DEFAULT\_COMMANDS();}
212 
213     \textcolor{keywordflow}{return} 0;
214 \}
\end{DoxyCode}
\mbox{\Hypertarget{classTemplateModule_a9ee1970fb39e76ae38e838df00e7a058}\label{classTemplateModule_a9ee1970fb39e76ae38e838df00e7a058}} 
\index{Template\+Module@{Template\+Module}!run@{run}}
\index{run@{run}!Template\+Module@{Template\+Module}}
\subsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily void Template\+Module\+::run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}

\begin{DoxySeeAlso}{See also}
Module\+Base\+::run() 
\end{DoxySeeAlso}


Definition at line 145 of file template\+\_\+module.\+cpp.


\begin{DoxyCode}
146 \{
147     \textcolor{comment}{// // Example: run the loop synchronized to the sensor\_combined topic publication}
148     \textcolor{comment}{// int sensor\_combined\_sub = orb\_subscribe(ORB\_ID(sensor\_combined));}
149 
150     \textcolor{comment}{// px4\_pollfd\_struct\_t fds[1];}
151     \textcolor{comment}{// fds[0].fd = sensor\_combined\_sub;}
152     \textcolor{comment}{// fds[0].events = POLLIN;}
153 
154     \textcolor{comment}{// // initialize parameters}
155     \textcolor{comment}{// parameters\_update(true);}
156 
157     \textcolor{comment}{// while (!should\_exit()) \{}
158 
159     \textcolor{comment}{//  // wait for up to 1000ms for data}
160     \textcolor{comment}{//  int pret = px4\_poll(fds, (sizeof(fds) / sizeof(fds[0])), 1000);}
161 
162     \textcolor{comment}{//  if (pret == 0) \{}
163     \textcolor{comment}{//      // Timeout: let the loop run anyway, don't do `continue` here}
164 
165     \textcolor{comment}{//  \} else if (pret < 0) \{}
166     \textcolor{comment}{//      // this is undesirable but not much we can do}
167     \textcolor{comment}{//      PX4\_ERR("poll error %d, %d", pret, errno);}
168     \textcolor{comment}{//      px4\_usleep(50000);}
169     \textcolor{comment}{//      continue;}
170 
171     \textcolor{comment}{//  \} else if (fds[0].revents & POLLIN) \{}
172 
173     \textcolor{comment}{//      struct sensor\_combined\_s sensor\_combined;}
174     \textcolor{comment}{//      orb\_copy(ORB\_ID(sensor\_combined), sensor\_combined\_sub, &sensor\_combined);}
175     \textcolor{comment}{//      // TODO: do something with the data...}
176 
177     \textcolor{comment}{//  \}}
178 
179     \textcolor{comment}{//  parameters\_update();}
180     \textcolor{comment}{// \}}
181 
182     \textcolor{comment}{// orb\_unsubscribe(sensor\_combined\_sub);}
183 \}
\end{DoxyCode}
\mbox{\Hypertarget{classTemplateModule_a442b58c36fd9a84d34c6c2ca5da30500}\label{classTemplateModule_a442b58c36fd9a84d34c6c2ca5da30500}} 
\index{Template\+Module@{Template\+Module}!task\+\_\+spawn@{task\+\_\+spawn}}
\index{task\+\_\+spawn@{task\+\_\+spawn}!Template\+Module@{Template\+Module}}
\subsubsection{\texorpdfstring{task\+\_\+spawn()}{task\_spawn()}}
{\footnotesize\ttfamily int Template\+Module\+::task\+\_\+spawn (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxySeeAlso}{See also}
Module\+Base 
\end{DoxySeeAlso}


Definition at line 72 of file template\+\_\+module.\+cpp.


\begin{DoxyCode}
73 \{
74     \_task\_id = os\_task\_spawn\_cmd(\textcolor{stringliteral}{"module"},
75                       SCHED\_DEFAULT,
76                       SCHED\_PRIORITY\_DEFAULT,
77                       1024,
78                       (os\_main\_t)&run\_trampoline,
79                       (\textcolor{keywordtype}{char} *\textcolor{keyword}{const} *)argv);
80     
81 
82     \textcolor{keywordflow}{if} (\_task\_id < 0) \{
83         \_task\_id = -1;
84         \textcolor{keywordflow}{return} -errno;
85     \}
86 
87     \textcolor{keywordflow}{return} 0;
88 \}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/andressanchez/\+Escritorio/\+G\+I\+T/project\+\_\+template/src/modules/template\+\_\+module/template\+\_\+module.\+h\item 
/home/andressanchez/\+Escritorio/\+G\+I\+T/project\+\_\+template/src/modules/template\+\_\+module/template\+\_\+module.\+cpp\end{DoxyCompactItemize}
